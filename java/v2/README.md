## æœ¬é¡¹ç›®ä¸ºï¼šspring cloudã€zull/gatewayã€oauth2ã€jwtæ•´åˆé¡¹ç›®,æŒä¹…å±‚ç”¨çš„mybatis-plusã€‚

è¯·ç”¨ideaæ‰“å¼€parentçˆ¶æ–‡ä»¶ï¼Œä»–ä¼šè‡ªåŠ¨åŠ è½½å…¶ä»–å­æ¨¡å—ï¼ˆæœåŠ¡ï¼‰ã€‚

è¿è¡Œæ­¤é¡¹ç›®è¯·åˆ°DBæ–‡ä»¶å¤¹å¯¼å…¥sqlæ–‡ä»¶åˆ°ä½ çš„æœ¬åœ°å½“ä¸­ã€‚

DBæ–‡ä»¶å¤¹æœ‰postmanæµ‹è¯•æŽ¥å£ç¤ºä¾‹æ–‡ä»¶ï¼Œå¯¼å…¥postmanå³å¯ã€‚

***è¿™ä¸ªé¡¹ç›®ä¼šæ—¶ä¸æ—¶ä¼šæ›´æ–°ä¸€äº›ç¤ºä¾‹ï¼ˆæœ‰ç«–çº¿ä¸ºæ–°å¢žç¤ºä¾‹ï¼‰ï¼Œå¦‚æžœè§£å†³äº†ä½ çš„é—®é¢˜éº»çƒ¦ç‚¹ä¸ªæ˜Ÿæ˜Ÿå“Ÿ***ðŸ˜˜ðŸ˜˜ðŸ˜˜



### wsm-discoveryæ˜¯eurekaæ³¨å†Œä¸­å¿ƒ



### wsm-gatewayï¼ˆç½‘å…³ï¼‰

1ã€ç”¨çš„spring-cloud-starter-gatewayä¾èµ–ï¼Œæœ‰gatewayç½‘å…³çš„ä¸€äº›é…ç½®æ–¹å¼ï¼Œhystrix ç†”æ–­å™¨ã€‚

2ã€**wsm-gateway**ã€**wsm-zull**éšä¾¿ç”¨å“ªç§éƒ½å¯ä»¥ã€‚



### wsm-zullï¼ˆç½‘å…³ï¼‰

1ã€æœ‰zullç½‘å…³çš„é…ç½®æ–¹å¼ï¼Œç†”æ–­å™¨é…ç½®ã€‚

2ã€**wsm-gateway**ã€**wsm-zull**éšä¾¿ç”¨å“ªç§éƒ½å¯ä»¥ã€‚



### wsm-oauthï¼ˆoauth2è®¤è¯ä¸­å¿ƒï¼Œé›†æˆäº†jwt)

1ã€spirng security, oauth2è®¤è¯ä¸­å¿ƒæœåŠ¡ï¼Œé›†æˆäº†jwtã€‚

2ã€å¯ä»¥ç”¨oauth2æ–¹å¼ç”Ÿæˆtokenï¼Œä¹Ÿå¯ä»¥ç”¨jwtï¼ˆå¯¹ç§°åŠ å¯†ï¼Œéžå¯¹ç§°åŠ å¯†éƒ½æœ‰ï¼‰çš„æ–¹å¼ç”Ÿæˆtokenï¼Œjwtå¯ä»¥è‡ªå®šä¹‰tokenç”Ÿæˆæºå¸¦çš„ä¿¡æ¯ï¼Œæ ¹æ®ä»£ç é‡Œçš„æ³¨é‡Šç”¨å“ªç§å³å¯ã€‚

3ã€tokençš„å­˜å‚¨æ–¹å¼å¯ä»¥æ˜¯ï¼šå†…å­˜ã€æ•°æ®åº“ã€redisã€jwtç­‰ã€‚æ ¹æ®ä»£ç é‡Œçš„æ³¨é‡Šç”¨å“ªç§å³å¯ã€‚

4ã€æœ‰è‡ªå®šä¹‰tokenå¼‚å¸¸ä¿¡æ¯,ç”¨äºŽtokenæ ¡éªŒå¤±è´¥è¿”å›žä¿¡æ¯ã€‚æœ‰èµ„æºæŽˆæƒå¼‚å¸¸å¤„ç†ã€‚

5ã€æ ¹æ®/oauth/tokenæŽ¥å£èŽ·å–çš„tokenï¼Œæºå¸¦è¯¥tokenå¯ä»¥è¯·æ±‚å„æœåŠ¡æœ‰securityæƒé™çš„æŽ¥å£ã€‚



### wsm-upmsï¼ˆé€šç”¨ç”¨æˆ·æƒé™ç³»ç»Ÿã€èµ„æºæœåŠ¡ï¼‰

1ã€é…ç½®äº†èµ„æºæœåŠ¡ï¼Œæ ¹æ®é¡¹ç›®codeä»Žæ•°æ®åº“è¯»å–å‡ºæ¥çš„è§’è‰²ï¼Œèµ„æºurlä¿¡æ¯ï¼ˆå³æŽ¥å£åœ°å€ï¼‰ç»™æŽ¥å£ä½¿ç”¨securityæƒé™ã€‚

2ã€æœ‰æ³¨å†Œï¼Œç™»å½•ï¼Œé€€å‡ºï¼Œå„æŽ§åˆ¶å™¨ç­‰æŽ¥å£ã€‚ã€‚ã€‚

3ã€mybatis-plusä»£ç ç”Ÿæˆå™¨ã€‚

> 4ã€æµ‹è¯•rocketmqåˆ†å¸ƒå¼äº‹åŠ¡æœ€ç»ˆä¸€è‡´æ€§ï¼ˆrocketmqç‰ˆæœ¬4.5.1ï¼‰ã€‚è¦æµ‹è¯•è¯·å…ˆä¸‹è½½rocketmqå®‰è£…å¹¶è¿è¡Œã€‚æ³¨ï¼šæœ¬äººwindosä¸Šå®‰è£…è¿è¡Œäº†ï¼Œæµ‹è¯•rocketmqæŽ¥å£æ—¶å¯èƒ½ä¼šæŠ¥å•¥å•¥å•¥é”™è¯¯ï¼Œåˆ°linuxä¸Šå®‰è£…å°±å¥½äº†ã€‚
>
> 5ã€æµ‹è¯•é˜¿é‡Œseataåˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆseataç‰ˆæœ¬0.8.0ï¼‰ã€‚è¦æµ‹è¯•è¯·åˆ°æˆ‘çš„githubä¸Šä¸‹è½½seataï¼ˆseata serverï¼‰ï¼Œç„¶åŽåˆ°serveræ–‡ä»¶å¤¹ä¸‹è¿è¡Œserverå³å¯ã€‚æˆ–è€…åˆ°githubä¸Šä¸‹è½½é˜¿é‡Œå®˜æ–¹çš„seataï¼ˆseata serverï¼‰ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡éœ€è¦ä¿®æ”¹file.confè·Ÿregistry.confçš„é…ç½®æ‰èƒ½è¿è¡Œã€‚æ³¨ï¼šè¿è¡Œwsm-upmsæœåŠ¡å¯èƒ½ä¼šæŠ¥æ³¨å†Œä¸ä¸Šseata serverï¼Œç„¶åŽseata serverä¹Ÿå¯èƒ½ä¼šæŠ¥OutOfDirectMemoryErrorå¼‚å¸¸ï¼Œç­‰ä»–ä¸ªå‡ åˆ†é’Ÿå°±å¥½äº†ã€‚
>
> 6ã€å¤šæ–‡ä»¶ä¸Šä¼ ï¼Œä¸‹è½½ï¼Œåˆ é™¤æ–‡ä»¶ç­‰ç¤ºä¾‹ã€‚



### wsm-workï¼ˆèµ„æºæœåŠ¡ï¼‰

1ã€é…ç½®äº†èµ„æºæœåŠ¡ï¼Œæ ¹æ®é¡¹ç›®codeä»Ž**wsm-upmsæœåŠ¡**è°ƒç”¨feignè¯»å–å‡ºæ¥çš„è§’è‰²ï¼Œèµ„æºurlä¿¡æ¯ï¼ˆå³æŽ¥å£åœ°å€ï¼‰ç»™æŽ¥å£ä½¿ç”¨securityæƒé™ã€‚

2ã€è¿è¡Œæ­¤æœåŠ¡è¯·å…ˆè¿è¡Œ**wsm-upmsæœåŠ¡**ã€‚





> ### wsm-demo
>
> 1ã€æœ‰æ•´åˆspring websocketï¼ˆæ¶ˆæ¯æŽ¨é€ï¼‰çš„ç¤ºä¾‹ã€‚
>
> 2ã€hystrix ç†”æ–­å™¨ï¼Œhystrix dashboard ç†”æ–­å™¨ä»ªè¡¨ç›˜é¡µé¢ã€‚
>
> 
>
> ### wsm-config-serverï¼ˆconfig-serverï¼‰
>
> 1ã€é«˜å¯ç”¨é…ç½®ä¸­å¿ƒï¼Œä»Žè¿œç¨‹gitè¯»å–é…ç½®æ–‡ä»¶ä¾›å…¶ä»–æœåŠ¡ä½¿ç”¨ã€‚
>
> 2ã€Spring Cloud Busåˆ·æ–°é…ç½®ï¼ˆä½¿ç”¨çš„Rabbitmqï¼‰ï¼Œgitä¸Šçš„é…ç½®æœ‰å˜åŒ–ä¸ç”¨é‡å¯é¡¹ç›®å°±èƒ½è¯»å–ä¾›å…¶ä»–æœåŠ¡ä½¿ç”¨ï¼Œ**wsm-publicæœåŠ¡**(config-client)æœ‰è¯»å–å€¼çš„ç¤ºä¾‹ã€‚
>
> 
>
> ### wsm-public
>
> 1ã€æœ‰spring-boot-starter-mailå‘é€é‚®ä»¶ç¤ºä¾‹ã€‚
>
> 2ã€é˜¿é‡ŒçŸ­ä¿¡æœåŠ¡å‘é€ç¤ºä¾‹ï¼ˆæ²¡æœ‰å¼€é€šé˜¿é‡ŒçŸ­ä¿¡æœåŠ¡ï¼Œæš‚æœªæµ‹è¯•è¿‡ã€‚ï¼‰
>
> 3ã€ç»“åˆ**wsm-config-serveræœåŠ¡**è¯»å–gité…ç½®ä¸­çš„å€¼ç¤ºä¾‹ã€‚
>



